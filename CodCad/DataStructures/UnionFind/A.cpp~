#include <bits/stdc++.h>

#define MAXN 100100

using namespace std;

int p[MAXN], rank[MAXN];

int findSet(int i)
{
	return (p[i] == i) ? i : (p[i] = findSet(p[i]));
}

bool isSameSet(int a, int b)
{
	return findSet(a) == findSet(b);
}

void unionSet(int a, int b)
{
	if (!isSameSet(a, b))
	{
		int x = findSet(a);
		int y = findSet(b);
		
		if (rank[x] > rank[y])
			p[y] = x;
		else
		{
			p[x] = y;
			if (rank[x] == rank[y])
				rank[y]++;
		}
	}
}

int main()
{

	int n, k;
	char op;
	
	scanf("%d %d", &n, &k);

	for (int i = 0; i < n; i++)
	{
		p[i] = i;
		rank[i] = 0;
	}
	
	for (int i = 0; i < k; i++)
	{
		int a, b;
		getchar();
		scanf("%c %d %d", &op, &a, &b);
	
		if (op == 'F')
			unionSet(a-1,b-1);
		else
		{
			if (isSameSet(a-1,b-1))
				printf("S\n");
			else
				printf("N\n");
		}
	}
	return 0;
}
